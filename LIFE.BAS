1000 REM Conway's Game of Life
1001 REM -
1002 REM Copyright (c) 2012 Thorsten "mirabilos" Glaser
1003 REM All rights reserved. Published under The MirOS Licence.
1004 REM -
1005 DEFINT A-Z:DEF SEG=&hB800
1006 KEY OFF:COLOR 7,0:CLS
1007 DEF FNP(X,Y)=PEEK((((Y+25) MOD 25)*80+((X+80) MOD 80))*2)
1010 PRINT "Initial setting mode, press SPACE to toggle, RETURN to continue"
1020 PRINT "Press C to clear the board, R to reset. OK? Press a key then."
1030 WHILE INKEY$="":WEND
1050 CLS
1060 REM
1065 DATA 3,3,4,3,5,3,6,3,7,3,8,3,3,4,4,4,5,4,6,4,7,4,8,4
1066 DATA 10,3,10,4,10,5,10,6,10,7,10,8,11,3,11,4,11,5,11,6,11,7,11,8
1067 DATA 11,10,10,10,9,10,8,10,7,10,6,10,11,11,10,11,9,11,8,11,7,11,6,11
1068 DATA 4,11,4,10,4,9,4,8,4,7,4,6,3,11,3,10,3,9,3,8,3,7,3,6
1069 DATA 21,0,22,1,22,2,21,2,20,2,-1,-1
1070 RESTORE 1060
1080 READ X,Y
1090 IF X=-1 GOTO 1120
1100 POKE (Y*80+X)*2,42
1110 GOTO 1080
1120 X=0:Y=0
1125 LOCATE Y+1,X+1,1
1130 S$=INKEY$
1140 IF S$="" GOTO 1130
1150 IF S$=CHR$(13) GOTO 1800
1160 IF S$=" " GOTO 1240
1170 IF S$=CHR$(0)+CHR$(&h48) THEN Y=(Y-1+25) MOD 25:GOTO 1125
1180 IF S$=CHR$(0)+CHR$(&h50) THEN Y=(Y+1) MOD 25:GOTO 1125
1190 IF S$=CHR$(0)+CHR$(&h4B) THEN X=(X-1+80) MOD 80:GOTO 1125
1200 IF S$=CHR$(0)+CHR$(&h4D) THEN X=(X+1) MOD 80:GOTO 1125
1210 IF S$="c" THEN CLS:GOTO 1120
1220 IF S$="r" GOTO 1050
1225 IF S$=CHR$(27) THEN END
1230 GOTO 1130
1240 Z=PEEK((Y*80+X)*2)
1250 IF Z=42 THEN Z=32 ELSE Z=42
1260 POKE (Y*80+X)*2,Z
1270 GOTO 1130
1800 REM
1801 REM Erste Version in BASIC folgt.
1802 REM Zweite Version in ASM weiter unten, springe dahin.
1803 REM
1804 LOCATE 1,1,0
1805 GOTO 4000
1900 ON KEY(1) GOSUB 2300
1910 KEY(1) ON
2000 'V!=TIMER+.5
2010 FOR Y=0 TO 24
2020  FOR X=0 TO 79
2030   N=0
2040   Z=FNP(X-1,Y-1):IF Z=42 OR Z=46 THEN N=N+1
2050   Z=FNP(X  ,Y-1):IF Z=42 OR Z=46 THEN N=N+1
2060   Z=FNP(X+1,Y-1):IF Z=42 OR Z=46 THEN N=N+1
2070   Z=FNP(X-1,Y  ):IF Z=42 OR Z=46 THEN N=N+1
2080   Z=FNP(X+1,Y  ):IF Z=42 OR Z=46 THEN N=N+1
2090   Z=FNP(X-1,Y+1):IF Z=42 OR Z=46 THEN N=N+1
2100   Z=FNP(X  ,Y+1):IF Z=42 OR Z=46 THEN N=N+1
2110   Z=FNP(X+1,Y+1):IF Z=42 OR Z=46 THEN N=N+1
2120   Z=PEEK((Y*80+X)*2)
2130   IF Z=32 THEN IF N=3 THEN Z=43
2140   IF Z=42 THEN IF N<2 OR N>3 THEN Z=46
2150   POKE (Y*80+X)*2,Z
2160  NEXT X
2170 NEXT Y
2171 'POKE 1,&h70
2180 'WHILE INKEY$="" GOTO 2180:'IF TIMER<V! GOTO 2180
2190 'V!=TIMER+.5
2200 FOR Y=0 TO 24
2210  FOR X=0 TO 79
2220   Z=PEEK((Y*80+X)*2)
2230   IF Z=46 THEN Z=32
2240   IF Z=43 THEN Z=42
2250   POKE (Y*80+X)*2,Z
2260  NEXT X
2270 NEXT Y
2271 'POKE 1,&h7
2280 'WHILE INKEY$="" GOTO 2280:'IF TIMER<V! GOTO 2280
2281 GOTO 2000
2290 IF INKEY$="" GOTO 2000
2300 SYSTEM
3000 DATA 184,0,184,142,216,235,33,232,8,0,36,9,60,8,117,1
3010 DATA 71,195,49,219,136,235,193,227,2,0,235,193,227,4,0,203
3020 DATA 128,215,0,209,227,138,7,195,49,201,177,0,49,255,137,202
3030 DATA 128,237,1,115,2,181,24,128,233,1,115,2,177,79,136,204
3040 DATA 232,196,255,136,209,232,191,255,65,128,249,80,117,2,177,0
3050 DATA 232,180,255,136,245,232,175,255,134,204,232,170,255,254,197,128
3060 DATA 253,25,117,2,181,0,232,158,255,136,225,232,153,255,136,209
3070 DATA 232,148,255,137,209,232,154,255,60,32,117,9,131,255,3,117
3080 DATA 22,176,43,235,16,60,42,117,14,131,255,2,114,5,131,255
3090 DATA 3,118,4,176,46,136,7,65,128,249,80,114,143,254,197,128
3100 DATA 253,25,114,134,49,201,177,0,232,103,255,60,46,117,4,176
3110 DATA 32,235,5,60,43,117,3,72,136,7,65,128,249,80,114,232
3120 DATA 254,197,128,253,25,114,223,233,94,255,144,96,187,1,0,198
3121 'DATA 254,197,128,253,25,114,223,144,144,144,144,96,187,1,0,198
3130 DATA 7,112,49,192,205,22,187,1,0,198,7,7,97,233,72,255
4000 RESTORE 3000
4010 'DIM M%(112)
4020 'DEF SEG
4030 'Y=VARPTR(M%(1))
4021 DEF SEG=&hA000
4031 Y=0
4040 FOR Z=0 TO 223
4050  READ X
4060  POKE Y+Z,X
4070 NEXT Z
4080 'Y=VARPTR(M%(1))
4081 Y=0
4090 CALL Y
