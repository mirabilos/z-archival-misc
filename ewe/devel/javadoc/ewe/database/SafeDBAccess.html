<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//gnu.org///DTD XHTML 1.1 plus Target 1.0//EN" "../../resources/xhtml11-target10.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>SafeDBAccess</title><script src="../../resources/gjdoc.js" type="text/javascript"><!-- this comment required for konqueror 3.2.2 --></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="generator" content="GNU Gjdoc Standard Doclet"/><meta name="keywords" content="ewe.database.SafeDBAccess class"/><meta name="keywords" content="directory"/><meta name="keywords" content="name"/><meta name="keywords" content="sortNames"/><meta name="keywords" content="previousMode"/><meta name="keywords" content="updateCount"/><meta name="keywords" content="views"/><meta name="keywords" content="anyView"/><meta name="keywords" content="opened"/><meta name="keywords" content="openMode"/><meta name="keywords" content="isUpdating"/><meta name="keywords" content="lock"/><meta name="keywords" content="maker"/><meta name="keywords" content="disableRestore"/><meta name="keywords" content="getView()"/><meta name="keywords" content="getAnyView()"/><meta name="keywords" content="databaseOpened()"/><meta name="keywords" content="databaseClosed()"/><meta name="keywords" content="restore()"/><meta name="keywords" content="makeBackup()"/><meta name="keywords" content="close()"/><meta name="keywords" content="open()"/><meta name="keywords" content="create()"/><meta name="keywords" content="openForCreate()"/><meta name="keywords" content="closeCreate()"/><meta name="keywords" content="startUpdate()"/><meta name="keywords" content="abortUpdate()"/><meta name="keywords" content="endUpdate()"/><meta name="keywords" content="backupNow()"/><meta name="keywords" content="verifyBackup()"/><meta name="keywords" content="backupExists()"/><meta name="keywords" content="getBackupModifiedTime()"/><meta name="keywords" content="timeSinceBackup()"/><meta name="keywords" content="databaseExists()"/><meta name="keywords" content="getDatabaseModifiedTime()"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-layout.css" title="GNU Clean"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-color1.css" title="GNU Clean"/></head><body class="content class" onload="if(parent.contentPageLoaded)parent.contentPageLoaded(document.title)"><table class="navbar div top"><tr><td class="navbar div top"><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td><td class="header" rowspan="2">MirEwe 1.49mb4 API</td></tr><tr><td class="navi"><a href="../../ewe/database/RestoreException.html">Prev Class</a> | <a href="../../ewe/database/StandardEntryComparer.html">Next Class</a></td><td class="navi"><a href="../../index.html" title="Show in a frameset" target="_top">Frames</a> | <a href="SafeDBAccess.html" title="Show without frames" target="_top">No Frames</a> </td></tr><tr><td class="navi">Summary: Nested | <a href="#summary-fields">Field</a> | <a href="#summary-methods">Method</a> | <a href="#summary-constructors">Constr</a></td><td class="navi">Detail: Nested | <a href="#detail-fields">Field</a> | <a href="#detail-methods">Method</a> | <a href="#detail-constructors">Constr</a></td></tr></table><div class="class title outer"><h3 class="class title-package">ewe.database</h3><h1 class="class title-class">Class SafeDBAccess</h1></div><div class="class inheritance-tree"><ul class="inheritance 0"><li class="inheritance 0"><code><a href="../../java/lang/Object.html">java.lang.Object</a></code></li><li><ul class="inheritance 1"><li class="inheritance 1"><code>ewe.database.SafeDBAccess</code></li><li></li></ul></li></ul></div><hr/><div class="class synopsis outer"><div class="class synopsis declaration"><code>public class <b class="class synopsis name">SafeDBAccess</b></code></div><div class="class synopsis superclass"><code>extends <a href="../../java/lang/Object.html" title="Class in java.lang">Object</a></code></div></div><hr/><div class="class description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><a name="summary-fields" id="summary-fields"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Field Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/database/EntriesView.html" title="Class in ewe.database">EntriesView</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#anyView">anyView</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#directory">directory</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#disableRestore">disableRestore</a></code></dt><dd class="description"> Set this true to temporarily disable restoring from a backup.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#isUpdating">isUpdating</a></code></dt><dd class="description"> If the Database is open for updating, this will be true.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/sys/Lock.html" title="Class in ewe.sys">Lock</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#lock">lock</a></code></dt><dd class="description"> All operations are synchronized on this lock.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/database/DatabaseMaker.html" title="Interface in ewe.database">DatabaseMaker</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#maker">maker</a></code></dt><dd class="description"> This is the DatabaseMaker used to open the Database.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../java/lang/String.html" title="Class in java.lang">String</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#name">name</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../java/lang/String.html" title="Class in java.lang">String</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#openMode">openMode</a></code></dt><dd class="description"> If the Database is opened, this is the mode it was opened in.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#opened">opened</a></code></dt><dd class="description"> This is the currently open Database.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../java/lang/String.html" title="Class in java.lang">String</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#previousMode">previousMode</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../java/lang/String.html" title="Class in java.lang">String</a>[]</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#sortNames">sortNames</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#updateCount">updateCount</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/util/Hashtable.html" title="Class in ewe.util">Hashtable</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#views">views</a></code></dt></dl></td></tr></table></dd></dl><a name="summary-constructors" id="summary-constructors"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Constructor Summary</h2></td></tr><tr><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#SafeDBAccess:File:String:String-">SafeDBAccess</a>(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a>&nbsp;directory, <a href="../../java/lang/String.html" title="Class in java.lang">String</a>&nbsp;dbName, <a href="../../java/lang/String.html" title="Class in java.lang">String</a>[]&nbsp;sortNames)</code></dt><dd class="description"> Create a SafeDBAccess object.</dd></dl></td></tr></table></dd></dl><a name="summary-methods" id="summary-methods"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Method Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#abortUpdate:">abortUpdate</a>()</code></dt><dd class="description"> Abort the update process, close the db and do not rename the temp file to ".db".</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#backupExists:">backupExists</a>()</code></dt><dd class="description"> Check if a backup for the database exists.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#backupNow:">backupNow</a>()</code></dt><dd class="description"> This causes the database to be closed (if it is not open for updating) and then
 backed up.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#close:">close</a>()</code></dt><dd class="description"> Close the database if it is not open for updating.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#closeCreate:">closeCreate</a>()</code></dt><dd class="description"> Call this after initializing with openForCreate().</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#create:Object">create</a>(<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a>&nbsp;initializer)</code></dt><dd class="description"> This calls openForCreate() and then calls closeCreate().</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#databaseClosed:">databaseClosed</a>()</code></dt><dd class="description"> This is called when the database has been closed.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#databaseExists:">databaseExists</a>()</code></dt><dd class="description"> Check if the database does exist.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#databaseOpened:Database:String:boolean">databaseOpened</a>(<a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a>&nbsp;db, <a href="../../java/lang/String.html" title="Class in java.lang">String</a>&nbsp;mode, boolean&nbsp;forUpdate)</code></dt><dd class="description"> This gets called when the DB has been successfully opened.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#endUpdate:">endUpdate</a>()</code></dt><dd class="description"> End the update process.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/database/EntriesView.html" title="Class in ewe.database">EntriesView</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getAnyView:">getAnyView</a>()</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getBackupModifiedTime:">getBackupModifiedTime</a>()</code></dt><dd class="description"> Return the time the backup was last made.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getDatabaseModifiedTime:Time">getDatabaseModifiedTime</a>(<a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a>&nbsp;dest)</code></dt><dd class="description"> Return the time the dabase was last modified.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/database/EntriesView.html" title="Class in ewe.database">EntriesView</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getView:String">getView</a>(<a href="../../java/lang/String.html" title="Class in java.lang">String</a>&nbsp;sortName)</code></dt><dd class="description"> This gets the EntriesView created when the Database was opened for the specified
 sortName.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#makeBackup:">makeBackup</a>()</code></dt><dd class="description"> This makes a backup of the database.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#open:String">open</a>(<a href="../../java/lang/String.html" title="Class in java.lang">String</a>&nbsp;mode)</code></dt><dd class="description"> Open the database in either "r" or "rw" mode.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#openForCreate:Object">openForCreate</a>(<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a>&nbsp;initializer)</code></dt><dd class="description"> Open the database for creation only if it does not already exist.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#restore:">restore</a>()</code></dt><dd class="description"> This restores the dabase from the backup file if one exists.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#startUpdate:">startUpdate</a>()</code></dt><dd class="description"> Close the database if it is open, make a backup and then open it in "rw" mode
 for updating.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> long</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#timeSinceBackup:Time">timeSinceBackup</a>(<a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a>&nbsp;since)</code></dt><dd class="description"> Return the time elapsed in milliseconds between the last backup time and
 the provided Time.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#verifyBackup:">verifyBackup</a>()</code></dt><dd class="description"> If no backup exists at all, make it now.</dd></dl></td></tr></table></dd></dl><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table sub header"><td colspan="2"><h3 class="table sub header">Methods inherited from class java.lang.<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a></h3></td></tr><tr><td class="inherited"><a href="../../java/lang/Object.html#clone:" title="clone()"><code class="member">clone</code></a>, <a href="../../java/lang/Object.html#equals:Object" title="equals(Object)"><code class="member">equals</code></a>, <a href="../../java/lang/Object.html#finalize:" title="finalize()"><code class="member">finalize</code></a>, <a href="../../java/lang/Object.html#getClass:" title="getClass()"><code class="member">getClass</code></a>, <a href="../../java/lang/Object.html#hashCode:" title="hashCode()"><code class="member">hashCode</code></a>, <a href="../../java/lang/Object.html#toString:" title="toString()"><code class="member">toString</code></a></td></tr></table></dd></dl><a name="detail-fields" id="detail-fields"/><h2 class="section header">Field Details</h2><div class="section"><a name="anyView" id="anyView"/><div class="member detail outer"><h3 class="member detail name">anyView</h3><pre class="member detail synopsis">protected <a href="../../ewe/database/EntriesView.html" title="Class in ewe.database">EntriesView</a> anyView</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="directory" id="directory"/><div class="member detail outer"><h3 class="member detail name">directory</h3><pre class="member detail synopsis">protected <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> directory</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="disableRestore" id="disableRestore"/><div class="member detail outer"><h3 class="member detail name">disableRestore</h3><pre class="member detail synopsis">public boolean disableRestore</pre><blockquote class="member detail name"><div class="member detail description"> Set this true to temporarily disable restoring from a backup. If this is true and
 open() or startUpdate() is called, and the database is either corrupt or missing
 then an IOException will be thrown instead of a restore from backup.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="isUpdating" id="isUpdating"/><div class="member detail outer"><h3 class="member detail name">isUpdating</h3><pre class="member detail synopsis">public boolean isUpdating</pre><blockquote class="member detail name"><div class="member detail description"> If the Database is open for updating, this will be true.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="lock" id="lock"/><div class="member detail outer"><h3 class="member detail name">lock</h3><pre class="member detail synopsis">public <a href="../../ewe/sys/Lock.html" title="Class in ewe.sys">Lock</a> lock</pre><blockquote class="member detail name"><div class="member detail description"> All operations are synchronized on this lock.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="maker" id="maker"/><div class="member detail outer"><h3 class="member detail name">maker</h3><pre class="member detail synopsis">public <a href="../../ewe/database/DatabaseMaker.html" title="Interface in ewe.database">DatabaseMaker</a> maker</pre><blockquote class="member detail name"><div class="member detail description"> This is the DatabaseMaker used to open the Database. By default it is the
 value returned by DatabaseManager.getDefaultDatabaseMaker();, but you can
 replace it after calling the constructor.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="name" id="name"/><div class="member detail outer"><h3 class="member detail name">name</h3><pre class="member detail synopsis">protected <a href="../../java/lang/String.html" title="Class in java.lang">String</a> name</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="openMode" id="openMode"/><div class="member detail outer"><h3 class="member detail name">openMode</h3><pre class="member detail synopsis">public <a href="../../java/lang/String.html" title="Class in java.lang">String</a> openMode</pre><blockquote class="member detail name"><div class="member detail description"> If the Database is opened, this is the mode it was opened in. If it is open for
 update, it will be "rw", otherwise it may be "r" or "rw".
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="opened" id="opened"/><div class="member detail outer"><h3 class="member detail name">opened</h3><pre class="member detail synopsis">public <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a> opened</pre><blockquote class="member detail name"><div class="member detail description"> This is the currently open Database. It is null if it is not open.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="previousMode" id="previousMode"/><div class="member detail outer"><h3 class="member detail name">previousMode</h3><pre class="member detail synopsis">protected <a href="../../java/lang/String.html" title="Class in java.lang">String</a> previousMode</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="sortNames" id="sortNames"/><div class="member detail outer"><h3 class="member detail name">sortNames</h3><pre class="member detail synopsis">protected <a href="../../java/lang/String.html" title="Class in java.lang">String</a>[] sortNames</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="updateCount" id="updateCount"/><div class="member detail outer"><h3 class="member detail name">updateCount</h3><pre class="member detail synopsis">protected int updateCount</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="views" id="views"/><div class="member detail outer"><h3 class="member detail name">views</h3><pre class="member detail synopsis">protected <a href="../../ewe/util/Hashtable.html" title="Class in ewe.util">Hashtable</a> views</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-constructors" id="detail-constructors"/><h2 class="section header">Constructor Details</h2><div class="section"><a name="SafeDBAccess:File:String:String-" id="SafeDBAccess:File:String:String-"/><div class="member detail outer"><h3 class="member detail name">SafeDBAccess</h3><pre class="member detail synopsis">public SafeDBAccess(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> directory,
                    <a href="../../java/lang/String.html" title="Class in java.lang">String</a> dbName,
                    <a href="../../java/lang/String.html" title="Class in java.lang">String</a>[] sortNames)</pre><blockquote class="member detail name"><div class="member detail description"> Create a SafeDBAccess object. After creating it, use open() or startUpdate() to
 actually open the database.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">directory</code><span class="separator"> - </span><span class="description">The directory which contains the database.</span></dd><dd class="item"><code class="name">dbName</code><span class="separator"> - </span><span class="description">The root name (without the ".db" extension) of the database.</span></dd><dd class="item"><code class="name">sortNames</code><span class="separator"> - </span><span class="description">an optional set of sortNames for which EntriesView objects
will be created.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-methods" id="detail-methods"/><h2 class="section header">Method Details</h2><div class="section"><a name="abortUpdate:" id="abortUpdate:"/><div class="member detail outer"><h3 class="member detail name">abortUpdate</h3><pre class="member detail synopsis">public boolean abortUpdate()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Abort the update process, close the db and do not rename the temp file to ".db".
 The result of this is that the next time an open is done the backup file will be
 used.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">false if it is not in an update, true otherwise.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an IOException occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="backupExists:" id="backupExists:"/><div class="member detail outer"><h3 class="member detail name">backupExists</h3><pre class="member detail synopsis">public boolean backupExists()</pre><blockquote class="member detail name"><div class="member detail description"> Check if a backup for the database exists.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true if a backup for the database exists.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="backupNow:" id="backupNow:"/><div class="member detail outer"><h3 class="member detail name">backupNow</h3><pre class="member detail synopsis">public boolean backupNow()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> This causes the database to be closed (if it is not open for updating) and then
 backed up. If it was open before it will be re-opened in the same mode as before.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true if a backup was done, false if no backup was done because it was in
update mode.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an IO error occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="close:" id="close:"/><div class="member detail outer"><h3 class="member detail name">close</h3><pre class="member detail synopsis">public boolean close()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Close the database if it is not open for updating. endUpdate() should be used for
 when closing after an update.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true on successful closing, false if it is currently open for updating.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">on an IOError.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="closeCreate:" id="closeCreate:"/><div class="member detail outer"><h3 class="member detail name">closeCreate</h3><pre class="member detail synopsis">public void closeCreate()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Call this after initializing with openForCreate(). If openForCreate() returned
 null then do not call this method.
</div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description"></span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="create:Object" id="create:Object"/><div class="member detail outer"><h3 class="member detail name">create</h3><pre class="member detail synopsis">public boolean create(<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a> initializer)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> This calls openForCreate() and then calls closeCreate(). It is only useful if
 initializer is not null other wise a database with no fields would be created.
 A NullPointerException is thrown if initializer is null.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">initializer</code><span class="separator"> - </span><span class="description">the initializer used to initialize the database, which must be
non-null.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true if the database was created, false if it was not because it already
existed.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an IO error occurs during creation.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="databaseClosed:" id="databaseClosed:"/><div class="member detail outer"><h3 class="member detail name">databaseClosed</h3><pre class="member detail synopsis">protected void databaseClosed()</pre><blockquote class="member detail name"><div class="member detail description"> This is called when the database has been closed. By default this does nothing.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="databaseExists:" id="databaseExists:"/><div class="member detail outer"><h3 class="member detail name">databaseExists</h3><pre class="member detail synopsis">public boolean databaseExists()</pre><blockquote class="member detail name"><div class="member detail description"> Check if the database does exist.
 This will only work if it is not open for update.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true if the dabase exists, false if it does not exist or if it is open for update.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="databaseOpened:Database:String:boolean" id="databaseOpened:Database:String:boolean"/><div class="member detail outer"><h3 class="member detail name">databaseOpened</h3><pre class="member detail synopsis">protected void databaseOpened(<a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a> db,
                              <a href="../../java/lang/String.html" title="Class in java.lang">String</a> mode,
                              boolean forUpdate)</pre><blockquote class="member detail name"><div class="member detail description"> This gets called when the DB has been successfully opened. By default this does
 nothing.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">db</code><span class="separator"> - </span><span class="description">the open database.</span></dd><dd class="item"><code class="name">mode</code><span class="separator"> - </span><span class="description">the mode it was opened in.</span></dd><dd class="item"><code class="name">forUpdate</code><span class="separator"> - </span><span class="description">true if has been opened for updating.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="endUpdate:" id="endUpdate:"/><div class="member detail outer"><h3 class="member detail name">endUpdate</h3><pre class="member detail synopsis">public boolean endUpdate()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> End the update process. This will close the database and rename the ".db_" file
 back to the ".db" file. After calling this you must call open() again to re-open
 the database.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">false if it is not in an update, true otherwise.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an IOException occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getAnyView:" id="getAnyView:"/><div class="member detail outer"><h3 class="member detail name">getAnyView</h3><pre class="member detail synopsis">public <a href="../../ewe/database/EntriesView.html" title="Class in ewe.database">EntriesView</a> getAnyView()</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getBackupModifiedTime:" id="getBackupModifiedTime:"/><div class="member detail outer"><h3 class="member detail name">getBackupModifiedTime</h3><pre class="member detail synopsis">public <a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a> getBackupModifiedTime()</pre><blockquote class="member detail name"><div class="member detail description"> Return the time the backup was last made.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the time the backup was last made, or null if the backup does not exist.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getDatabaseModifiedTime:Time" id="getDatabaseModifiedTime:Time"/><div class="member detail outer"><h3 class="member detail name">getDatabaseModifiedTime</h3><pre class="member detail synopsis">public <a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a> getDatabaseModifiedTime(<a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a> dest)</pre><blockquote class="member detail name"><div class="member detail description"> Return the time the dabase was last modified.
 This will only work if it is not open for update.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">dest</code><span class="separator"> - </span><span class="description">an optional destination Time.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the time the database was last modified, or null if the database does not
exist or is open for update.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getView:String" id="getView:String"/><div class="member detail outer"><h3 class="member detail name">getView</h3><pre class="member detail synopsis">public <a href="../../ewe/database/EntriesView.html" title="Class in ewe.database">EntriesView</a> getView(<a href="../../java/lang/String.html" title="Class in java.lang">String</a> sortName)</pre><blockquote class="member detail name"><div class="member detail description"> This gets the EntriesView created when the Database was opened for the specified
 sortName.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">sortName</code><span class="separator"> - </span><span class="description">one of the sortNames provided in the constructor.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the created EntriesView or null if the name is incorrect or if the database
is not open.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="makeBackup:" id="makeBackup:"/><div class="member detail outer"><h3 class="member detail name">makeBackup</h3><pre class="member detail synopsis">protected void makeBackup()
            throws <a href="../../ewe/database/BackupException.html" title="Class in ewe.database">BackupException</a></pre><blockquote class="member detail name"><div class="member detail description"> This makes a backup of the database. The database must be closed for this to work.
</div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/database/BackupException.html" title="Class in ewe.database">BackupException</a></code><span class="separator"> - </span><span class="description">if an error occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="open:String" id="open:String"/><div class="member detail outer"><h3 class="member detail name">open</h3><pre class="member detail synopsis">public <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a> open(<a href="../../java/lang/String.html" title="Class in java.lang">String</a> mode)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Open the database in either "r" or "rw" mode. This operation cannot be done if
 the databse is opened for update via startUpdate(). If it is opened for update
 it will return null.
 <p/>
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">mode</code><span class="separator"> - </span><span class="description">either "r" or "rw" - any other value will generate an IllegalArgumentException</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the opened database.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">on any IO error.</span></dd><dd class="member detail thrown item"><code class="name"><a href="../../java/lang/IllegalArgumentException.html" title="Class in java.lang">IllegalArgumentException</a></code><span class="separator"> - </span><span class="description">if the mode is invalid.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="openForCreate:Object" id="openForCreate:Object"/><div class="member detail outer"><h3 class="member detail name">openForCreate</h3><pre class="member detail synopsis">public <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a> openForCreate(<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a> initializer)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Open the database for creation only if it does not already exist. Make sure you
 call closeCreate() on the returned Database when complete.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">initializer</code><span class="separator"> - </span><span class="description">an optional Object used to initialize the sorts and fields.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the open database ready for initialization if it did not exist, or null
if it did exist.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an error occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="restore:" id="restore:"/><div class="member detail outer"><h3 class="member detail name">restore</h3><pre class="member detail synopsis">protected void restore()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> This restores the dabase from the backup file if one exists. The database must
 be closed before this is done.
</div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if disableRestore is true.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="startUpdate:" id="startUpdate:"/><div class="member detail outer"><h3 class="member detail name">startUpdate</h3><pre class="member detail synopsis">public <a href="../../ewe/database/Database.html" title="Interface in ewe.database">Database</a> startUpdate()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Close the database if it is open, make a backup and then open it in "rw" mode
 for updating. During the update process the db is renamed to have a ".db_" extension
 and will not be renamed back until the update is complete via endUpdate().
 <p/>
 You can call startUpdate() multiple times but for each call to startUpdate() there
 must be a corresponding call to endUpdate(). Update mode is only exited when the
 last endUpdate() is called.
 <p/>
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the opened database.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an IO error occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="timeSinceBackup:Time" id="timeSinceBackup:Time"/><div class="member detail outer"><h3 class="member detail name">timeSinceBackup</h3><pre class="member detail synopsis">public long timeSinceBackup(<a href="../../ewe/sys/Time.html" title="Class in ewe.sys">Time</a> since)</pre><blockquote class="member detail name"><div class="member detail description"> Return the time elapsed in milliseconds between the last backup time and
 the provided Time.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">since</code><span class="separator"> - </span><span class="description">the Time to compare to the backup time, or null to use the current time.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the time elapsed in milliseconds between the last backup time and
the provided Time, or 0 if the backup time appears more recent than the "since" time
or -1 if no backup exists.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="verifyBackup:" id="verifyBackup:"/><div class="member detail outer"><h3 class="member detail name">verifyBackup</h3><pre class="member detail synopsis">public void verifyBackup()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> If no backup exists at all, make it now.
</div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an IO error occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><p class="navbar bottom spacer"> </p><table class="navbar div bottom"><tr><td><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td></tr></table><hr/>Copyright &copy; 2008 <a href="mailto:miros-discuss@mirbsd.de">The MirOS Project</a> and its contributors.</body></html>