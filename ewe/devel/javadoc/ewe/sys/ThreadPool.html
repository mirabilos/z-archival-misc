<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//gnu.org///DTD XHTML 1.1 plus Target 1.0//EN" "../../resources/xhtml11-target10.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>ThreadPool</title><script src="../../resources/gjdoc.js" type="text/javascript"><!-- this comment required for konqueror 3.2.2 --></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="generator" content="GNU Gjdoc Standard Doclet"/><meta name="keywords" content="ewe.sys.ThreadPool class"/><meta name="keywords" content="minThreads"/><meta name="keywords" content="maxThreads"/><meta name="keywords" content="waitTime"/><meta name="keywords" content="makeUpToMinimum()"/><meta name="keywords" content="doRun()"/><meta name="keywords" content="addTask()"/><meta name="keywords" content="close()"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-layout.css" title="GNU Clean"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-color1.css" title="GNU Clean"/></head><body class="content class" onload="if(parent.contentPageLoaded)parent.contentPageLoaded(document.title)"><table class="navbar div top"><tr><td class="navbar div top"><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td><td class="header" rowspan="2">MirEwe 1.49mb4 API</td></tr><tr><td class="navi"><a href="../../ewe/sys/Test.html">Prev Class</a> | <a href="../../ewe/sys/ThreadTask.html">Next Class</a></td><td class="navi"><a href="../../index.html" title="Show in a frameset" target="_top">Frames</a> | <a href="ThreadPool.html" title="Show without frames" target="_top">No Frames</a> </td></tr><tr><td class="navi">Summary: Nested | <a href="#summary-fields">Field</a> | <a href="#summary-methods">Method</a> | <a href="#summary-constructors">Constr</a></td><td class="navi">Detail: Nested | <a href="#detail-fields">Field</a> | <a href="#detail-methods">Method</a> | <a href="#detail-constructors">Constr</a></td></tr></table><div class="class title outer"><h3 class="class title-package">ewe.sys</h3><h1 class="class title-class">Class ThreadPool</h1></div><div class="class inheritance-tree"><ul class="inheritance 0"><li class="inheritance 0"><code><a href="../../java/lang/Object.html">java.lang.Object</a></code></li><li><ul class="inheritance 1"><li class="inheritance 1"><code><a href="../../ewe/sys/TaskObject.html">ewe.sys.TaskObject</a></code></li><li><ul class="inheritance 2"><li class="inheritance 2"><code>ewe.sys.ThreadPool</code></li><li></li></ul></li></ul></li></ul></div><dl class="class knownimplementing"><dt class="header"><b>Implemented Interfaces:</b></dt><dd class="item"><a href="../../java/lang/Runnable.html" title="Interface in java.lang">Runnable</a>, <a href="../../ewe/sys/Task.html" title="Interface in ewe.sys">Task</a></dd></dl><hr/><div class="class synopsis outer"><div class="class synopsis declaration"><code>public class <b class="class synopsis name">ThreadPool</b></code></div><div class="class synopsis superclass"><code>extends <a href="../../ewe/sys/TaskObject.html" title="Class in ewe.sys">TaskObject</a></code></div></div><hr/><div class="class description"> A ThreadPool represents a pool of running Threads that are waiting for tasks to run.
 You call addTask() to add a Task Object to the pool and an idle Thread is assigned
 to run the task. If no idle Thread is available a new one is created and used. ThreadPools
 can greatly improve performance in server applications since it reduces the overhead of
 creating new Threads. This has a greater effect under a true Java VM since Ewe Threads are
 very lightweight and really don't take any more system resources than any other object.
 <p/>
 You can specify a minimum number of idle Threads and Threads are added to the pool
 to make up to that minimum.
 <p/>
 You can specify a maximum number of Threads and if the maximum is reached all new tasks
 will have to wait until older ones are finished and their Threads are freed. If all
 Threads are idle and there are more idle threads than the specified minimum, the Threads
 will eventually terminate and be discarded until only the minimum number of Threads
 remain.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><a name="summary-fields" id="summary-fields"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Field Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis"> int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#maxThreads">maxThreads</a></code></dt><dd class="description"> The maximum number of allowed threads.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#minThreads">minThreads</a></code></dt><dd class="description"> The minimum number of allowed threads.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#waitTime">waitTime</a></code></dt><dd class="description"> How long (in <b>seconds</b>) before an idle thread decides to exit (if there are no tasks
 to run and if the number of threads is already greater than the minimum).</dd></dl></td></tr></table></dd></dl><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table sub header"><td colspan="2"><h3 class="table sub header">Fields inherited from class ewe.sys.<a href="../../ewe/sys/TaskObject.html" title="Class in ewe.sys">TaskObject</a></h3></td></tr><tr><td class="inherited"><a href="../../ewe/sys/TaskObject.html#handle"><code class="member">handle</code></a>, <a href="../../ewe/sys/TaskObject.html#interruptThreadToStop"><code class="member">interruptThreadToStop</code></a>, <a href="../../ewe/sys/TaskObject.html#myThread"><code class="member">myThread</code></a>, <a href="../../ewe/sys/TaskObject.html#napIterations"><code class="member">napIterations</code></a>, <a href="../../ewe/sys/TaskObject.html#napTime"><code class="member">napTime</code></a>, <a href="../../ewe/sys/TaskObject.html#shouldStop"><code class="member">shouldStop</code></a></td></tr></table></dd></dl><a name="summary-constructors" id="summary-constructors"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Constructor Summary</h2></td></tr><tr><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#ThreadPool:">ThreadPool</a>()</code></dt><dd class="description"> Create a ThreadPool with a minimum of 10 threads and no maximum.</dd></dl></td></tr><tr><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#ThreadPool:int:int">ThreadPool</a>(int&nbsp;min, int&nbsp;max)</code></dt><dd class="description"> Create a ThreadPool specifying the minimum and maximum number of threads.</dd></dl></td></tr></table></dd></dl><a name="summary-methods" id="summary-methods"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Method Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis"> void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#addTask:Runnable">addTask</a>(<a href="../../java/lang/Runnable.html" title="Interface in java.lang">Runnable</a>&nbsp;toRun)</code></dt><dd class="description"> Use this to add a task to run.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#addTask:Runnable:int">addTask</a>(<a href="../../java/lang/Runnable.html" title="Interface in java.lang">Runnable</a>&nbsp;toRun, int&nbsp;timeOutInSeconds)</code></dt><dd class="description"> Use this to add a task to run.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#close:">close</a>()</code></dt><dd class="description"> After calling this no more tasks can be added and any spare threads
 will eventually die.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#doRun:">doRun</a>()</code></dt><dd class="description"> Override this method if you want to use an mThread to run your Task.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> void</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#makeUpToMinimum:">makeUpToMinimum</a>()</code></dt><dd class="description"> Add threads until the minimum has been achieved.</dd></dl></td></tr></table></dd></dl><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table sub header"><td colspan="2"><h3 class="table sub header">Methods inherited from class ewe.sys.<a href="../../ewe/sys/TaskObject.html" title="Class in ewe.sys">TaskObject</a></h3></td></tr><tr><td class="inherited"><a href="../../ewe/sys/TaskObject.html#checkAbortFail:Handle:boolean" title="checkAbortFail(Handle,boolean)"><code class="member">checkAbortFail</code></a>, <a href="../../ewe/sys/TaskObject.html#checkFailure:boolean:Handle:boolean" title="checkFailure(boolean,Handle,boolean)"><code class="member">checkFailure</code></a>, <a href="../../ewe/sys/TaskObject.html#doRun:" title="doRun()"><code class="member">doRun</code></a>, <a href="../../ewe/sys/TaskObject.html#doStart:" title="doStart()"><code class="member">doStart</code></a>, <a href="../../ewe/sys/TaskObject.html#doStop:int" title="doStop(int)"><code class="member">doStop</code></a>, <a href="../../ewe/sys/TaskObject.html#exec:String:Frame" title="exec(String,Frame)"><code class="member">exec</code></a>, <a href="../../ewe/sys/TaskObject.html#getHandle:" title="getHandle()"><code class="member">getHandle</code></a>, <a href="../../ewe/sys/TaskObject.html#nap:" title="nap()"><code class="member">nap</code></a>, <a href="../../ewe/sys/TaskObject.html#run:" title="run()"><code class="member">run</code></a>, <a href="../../ewe/sys/TaskObject.html#setNapTime:int:int" title="setNapTime(int,int)"><code class="member">setNapTime</code></a>, <a href="../../ewe/sys/TaskObject.html#show:String:Frame" title="show(String,Frame)"><code class="member">show</code></a>, <a href="../../ewe/sys/TaskObject.html#sleep:int" title="sleep(int)"><code class="member">sleep</code></a>, <a href="../../ewe/sys/TaskObject.html#start:String" title="start(String)"><code class="member">start</code></a>, <a href="../../ewe/sys/TaskObject.html#startTask:" title="startTask()"><code class="member">startTask</code></a>, <a href="../../ewe/sys/TaskObject.html#stopTask:int" title="stopTask(int)"><code class="member">stopTask</code></a>, <a href="../../ewe/sys/TaskObject.html#waitOn:Handle:int:boolean" title="waitOn(Handle,int,boolean)"><code class="member">waitOn</code></a>, <a href="../../ewe/sys/TaskObject.html#waitOnAny:Handle:int:boolean" title="waitOnAny(Handle,int,boolean)"><code class="member">waitOnAny</code></a>, <a href="../../ewe/sys/TaskObject.html#waitOnSuccess:Handle:boolean" title="waitOnSuccess(Handle,boolean)"><code class="member">waitOnSuccess</code></a>, <a href="../../ewe/sys/TaskObject.html#yield:" title="yield()"><code class="member">yield</code></a>, <a href="../../ewe/sys/TaskObject.html#yield:int" title="yield(int)"><code class="member">yield</code></a></td></tr></table></dd></dl><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table sub header"><td colspan="2"><h3 class="table sub header">Methods inherited from class java.lang.<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a></h3></td></tr><tr><td class="inherited"><a href="../../java/lang/Object.html#clone:" title="clone()"><code class="member">clone</code></a>, <a href="../../java/lang/Object.html#equals:Object" title="equals(Object)"><code class="member">equals</code></a>, <a href="../../java/lang/Object.html#finalize:" title="finalize()"><code class="member">finalize</code></a>, <a href="../../java/lang/Object.html#getClass:" title="getClass()"><code class="member">getClass</code></a>, <a href="../../java/lang/Object.html#hashCode:" title="hashCode()"><code class="member">hashCode</code></a>, <a href="../../java/lang/Object.html#toString:" title="toString()"><code class="member">toString</code></a></td></tr></table></dd></dl><a name="detail-fields" id="detail-fields"/><h2 class="section header">Field Details</h2><div class="section"><a name="maxThreads" id="maxThreads"/><div class="member detail outer"><h3 class="member detail name">maxThreads</h3><pre class="member detail synopsis">public int maxThreads</pre><blockquote class="member detail name"><div class="member detail description"> The maximum number of allowed threads. If this is &lt;0 there is no maximum (the default).
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="minThreads" id="minThreads"/><div class="member detail outer"><h3 class="member detail name">minThreads</h3><pre class="member detail synopsis">public int minThreads</pre><blockquote class="member detail name"><div class="member detail description"> The minimum number of allowed threads. By default this is 10.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="waitTime" id="waitTime"/><div class="member detail outer"><h3 class="member detail name">waitTime</h3><pre class="member detail synopsis">public int waitTime</pre><blockquote class="member detail name"><div class="member detail description"> How long (in <b>seconds</b>) before an idle thread decides to exit (if there are no tasks
 to run and if the number of threads is already greater than the minimum). By default it
 is 5.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-constructors" id="detail-constructors"/><h2 class="section header">Constructor Details</h2><div class="section"><a name="ThreadPool:" id="ThreadPool:"/><div class="member detail outer"><h3 class="member detail name">ThreadPool</h3><pre class="member detail synopsis">public ThreadPool()</pre><blockquote class="member detail name"><div class="member detail description"> Create a ThreadPool with a minimum of 10 threads and no maximum.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="ThreadPool:int:int" id="ThreadPool:int:int"/><div class="member detail outer"><h3 class="member detail name">ThreadPool</h3><pre class="member detail synopsis">public ThreadPool(int min,
                  int max)</pre><blockquote class="member detail name"><div class="member detail description"> Create a ThreadPool specifying the minimum and maximum number of threads.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-methods" id="detail-methods"/><h2 class="section header">Method Details</h2><div class="section"><a name="addTask:Runnable" id="addTask:Runnable"/><div class="member detail outer"><h3 class="member detail name">addTask</h3><pre class="member detail synopsis">public void addTask(<a href="../../java/lang/Runnable.html" title="Interface in java.lang">Runnable</a> toRun)
            throws <a href="../../java/lang/IllegalStateException.html" title="Class in java.lang">IllegalStateException</a></pre><blockquote class="member detail name"><div class="member detail description"> Use this to add a task to run. This should be a Runnable, including a TaskObject.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">toRun</code><span class="separator"> - </span><span class="description">The task to run.</span></dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../java/lang/IllegalStateException.html" title="Class in java.lang">IllegalStateException</a></code><span class="separator"> - </span><span class="description">if the ThreadPool is closed.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="addTask:Runnable:int" id="addTask:Runnable:int"/><div class="member detail outer"><h3 class="member detail name">addTask</h3><pre class="member detail synopsis">public void addTask(<a href="../../java/lang/Runnable.html" title="Interface in java.lang">Runnable</a> toRun,
                    int timeOutInSeconds)
            throws <a href="../../java/lang/IllegalStateException.html" title="Class in java.lang">IllegalStateException</a></pre><blockquote class="member detail name"><div class="member detail description"> Use this to add a task to run. This should be a Runnable, including a TaskObject.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">toRun</code><span class="separator"> - </span><span class="description">The task to run.</span></dd><dd class="item"><code class="name">timeOutInSeconds</code><span class="separator"> - </span><span class="description">A maximum length of time for the task to run for. If this is
zero or less then the task will have no maximum time.</span></dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../java/lang/IllegalStateException.html" title="Class in java.lang">IllegalStateException</a></code><span class="separator"> - </span><span class="description">if the ThreadPool is closed.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="close:" id="close:"/><div class="member detail outer"><h3 class="member detail name">close</h3><pre class="member detail synopsis">public void close()</pre><blockquote class="member detail name"><div class="member detail description"> After calling this no more tasks can be added and any spare threads
 will eventually die.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="doRun:" id="doRun:"/><div class="member detail outer"><h3 class="member detail name">doRun</h3><pre class="member detail synopsis">protected void doRun()</pre><blockquote class="member detail name"><div class="member detail description"> Override this method if you want to use an mThread to run your Task. Otherwise
 if you are using timers or callbacks, override the doStart() method.
</div><dl class="member detail overridden list"><dt class="member detail overridden header"><b>Overrides:</b></dt><dd class="member detail overridden item"><a href="../../ewe/sys/TaskObject.html#doRun:">doRun</a> in interface <a href="../../ewe/sys/TaskObject.html" title="Class in ewe.sys">TaskObject</a></dd></dl><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="makeUpToMinimum:" id="makeUpToMinimum:"/><div class="member detail outer"><h3 class="member detail name">makeUpToMinimum</h3><pre class="member detail synopsis">public void makeUpToMinimum()</pre><blockquote class="member detail name"><div class="member detail description"> Add threads until the minimum has been achieved. If you have increased the minimum
 then you can optionally call this.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><p class="navbar bottom spacer"> </p><table class="navbar div bottom"><tr><td><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td></tr></table><hr/>Copyright &copy; 2008 <a href="mailto:miros-discuss@mirbsd.de">The MirOS Project</a> and its contributors.</body></html>