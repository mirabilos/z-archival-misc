<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//gnu.org///DTD XHTML 1.1 plus Target 1.0//EN" "../../resources/xhtml11-target10.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>SafeFile</title><script src="../../resources/gjdoc.js" type="text/javascript"><!-- this comment required for konqueror 3.2.2 --></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="generator" content="GNU Gjdoc Standard Doclet"/><meta name="keywords" content="ewe.io.SafeFile class"/><meta name="keywords" content="file"/><meta name="keywords" content="fileName"/><meta name="keywords" content="keepBackup"/><meta name="keywords" content="getFile()"/><meta name="keywords" content="getFullPath()"/><meta name="keywords" content="getNewFile()"/><meta name="keywords" content="getTempFile()"/><meta name="keywords" content="setNewFile()"/><meta name="keywords" content="getNewFileName()"/><meta name="keywords" content="getBackupFile()"/><meta name="keywords" content="getBackupFileName()"/><meta name="keywords" content="backupCurrent()"/><meta name="keywords" content="swapToNew()"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-layout.css" title="GNU Clean"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-color1.css" title="GNU Clean"/></head><body class="content class" onload="if(parent.contentPageLoaded)parent.contentPageLoaded(document.title)"><table class="navbar div top"><tr><td class="navbar div top"><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td><td class="header" rowspan="2">MirEwe 1.49mb4 API</td></tr><tr><td class="navi"><a href="../../ewe/io/RewindableStream.html">Prev Class</a> | <a href="../../ewe/io/SerialPort.html">Next Class</a></td><td class="navi"><a href="../../index.html" title="Show in a frameset" target="_top">Frames</a> | <a href="SafeFile.html" title="Show without frames" target="_top">No Frames</a> </td></tr><tr><td class="navi">Summary: Nested | <a href="#summary-fields">Field</a> | <a href="#summary-methods">Method</a> | <a href="#summary-constructors">Constr</a></td><td class="navi">Detail: Nested | <a href="#detail-fields">Field</a> | <a href="#detail-methods">Method</a> | <a href="#detail-constructors">Constr</a></td></tr></table><div class="class title outer"><h3 class="class title-package">ewe.io</h3><h1 class="class title-class">Class SafeFile</h1></div><div class="class inheritance-tree"><ul class="inheritance 0"><li class="inheritance 0"><code><a href="../../java/lang/Object.html">java.lang.Object</a></code></li><li><ul class="inheritance 1"><li class="inheritance 1"><code>ewe.io.SafeFile</code></li><li></li></ul></li></ul></div><hr/><div class="class synopsis outer"><div class="class synopsis declaration"><code>public class <b class="class synopsis name">SafeFile</b></code></div><div class="class synopsis superclass"><code>extends <a href="../../java/lang/Object.html" title="Class in java.lang">Object</a></code></div></div><hr/><div class="class description"> This is used to "safely" modify the contents of a file. This is used when it is critical
 that the information in a file not be corrupted due to a crash during writing.<p/>
 To use it to modify a file you would follow the following procedure.
 <pre>
 1. Create a SafeFile for the actual data file.

 SafeFile sf = new SafeFile(new File("\Program Files\MyApp\Config.dat"));

 2. Request a temporary file to write new data to.

 File f = sf.getTempFile();

 3. Copy or write the data to the temp file.

 4. When the file is complete call setNewFile() to cause it to switch over
 to the temp file.

 sf.setNewFile(f);

 This does the following:

 - The temporary file is renamed to a ".new" file.
 - Any ".bak" (backup) file is deleted.
 - The actual data file is renamed to a ".bak" file.
 - The ".new" file is renamed to the actual data file.
 - If the SafeFile is created with keepBackup as false the ".bak" file is deleted.

 </pre>
 This sequence is such that if at any point in the procedure there should be a system
 crash, either the original file would be unchanged, or it can be recovered from the ".bak"
 (the old version) or ".new" (the new version).
 <p/>
 Creating a SafeFile() for an actual file will prompt the system to ensure that the file
 exists. If it does not it will be recreated (if possible) from the ".bak" or ".new" file. Therefore
 when accessing that particular file, you should always use a SafeFile() to do so.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><a name="summary-fields" id="summary-fields"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Field Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#file">file</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../java/lang/String.html" title="Class in java.lang">String</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#fileName">fileName</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#keepBackup">keepBackup</a></code></dt></dl></td></tr></table></dd></dl><a name="summary-constructors" id="summary-constructors"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Constructor Summary</h2></td></tr><tr><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#SafeFile:File">SafeFile</a>(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a>&nbsp;file)</code></dt><dd class="description"> Create a new SafeFile.</dd></dl></td></tr><tr><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#SafeFile:File:boolean">SafeFile</a>(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a>&nbsp;file, boolean&nbsp;keepBackup)</code></dt><dd class="description"> Create a new SafeFile.</dd></dl></td></tr></table></dd></dl><a name="summary-methods" id="summary-methods"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Method Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#backupCurrent:">backupCurrent</a>()</code></dt><dd class="description"> NOT IMPLEMENTED YET.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getBackupFile:">getBackupFile</a>()</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../java/lang/String.html" title="Class in java.lang">String</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getBackupFileName:">getBackupFileName</a>()</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getFile:">getFile</a>()</code></dt><dd class="description"> Get the actual file.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../java/lang/String.html" title="Class in java.lang">String</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getFullPath:">getFullPath</a>()</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getNewFile:">getNewFile</a>()</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../java/lang/String.html" title="Class in java.lang">String</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getNewFileName:">getNewFileName</a>()</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getTempFile:">getTempFile</a>()</code></dt><dd class="description"> Get a temporary file that will eventually be used to replace the actual file.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setNewFile:File">setNewFile</a>(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a>&nbsp;f)</code></dt><dd class="description"> Safely rename the file so that it becomes the orignal file.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setNewFile:File:boolean">setNewFile</a>(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a>&nbsp;f, boolean&nbsp;updateTime)</code></dt><dd class="description"> Safely rename the file so that it becomes the orignal file.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#swapToNew:">swapToNew</a>()</code></dt><dd class="description"> This will do the following:
 <nl>
 <li> Remove the old backup file (if it exists).</li></nl></dd></dl></td></tr></table></dd></dl><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table sub header"><td colspan="2"><h3 class="table sub header">Methods inherited from class java.lang.<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a></h3></td></tr><tr><td class="inherited"><a href="../../java/lang/Object.html#clone:" title="clone()"><code class="member">clone</code></a>, <a href="../../java/lang/Object.html#equals:Object" title="equals(Object)"><code class="member">equals</code></a>, <a href="../../java/lang/Object.html#finalize:" title="finalize()"><code class="member">finalize</code></a>, <a href="../../java/lang/Object.html#getClass:" title="getClass()"><code class="member">getClass</code></a>, <a href="../../java/lang/Object.html#hashCode:" title="hashCode()"><code class="member">hashCode</code></a>, <a href="../../java/lang/Object.html#toString:" title="toString()"><code class="member">toString</code></a></td></tr></table></dd></dl><a name="detail-fields" id="detail-fields"/><h2 class="section header">Field Details</h2><div class="section"><a name="file" id="file"/><div class="member detail outer"><h3 class="member detail name">file</h3><pre class="member detail synopsis">protected <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> file</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="fileName" id="fileName"/><div class="member detail outer"><h3 class="member detail name">fileName</h3><pre class="member detail synopsis">protected <a href="../../java/lang/String.html" title="Class in java.lang">String</a> fileName</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="keepBackup" id="keepBackup"/><div class="member detail outer"><h3 class="member detail name">keepBackup</h3><pre class="member detail synopsis">protected boolean keepBackup</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-constructors" id="detail-constructors"/><h2 class="section header">Constructor Details</h2><div class="section"><a name="SafeFile:File" id="SafeFile:File"/><div class="member detail outer"><h3 class="member detail name">SafeFile</h3><pre class="member detail synopsis">public SafeFile(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> file)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Create a new SafeFile. The creation of the SafeFile will automatically cause
the system to check to see if the file exists and if it does not, but a ".bak" or ".new"
does exist, then the ".bak" or ".new" will be renamed to the actual file.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">file</code><span class="separator"> - </span><span class="description">The actual file to be updated.</span></dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an exception occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="SafeFile:File:boolean" id="SafeFile:File:boolean"/><div class="member detail outer"><h3 class="member detail name">SafeFile</h3><pre class="member detail synopsis">public SafeFile(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> file,
                boolean keepBackup)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Create a new SafeFile. The creation of the SafeFile will automatically cause
the system to check to see if the file exists and if it does not, but a ".bak" or ".new"
does exist, then the ".bak" or ".new" will be renamed to the actual file.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">file</code><span class="separator"> - </span><span class="description">The actual file to be updated.</span></dd><dd class="item"><code class="name">keepBackup</code><span class="separator"> - </span><span class="description">specifies whether a backup of the previous version is to be kept.</span></dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an exception occurs.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-methods" id="detail-methods"/><h2 class="section header">Method Details</h2><div class="section"><a name="backupCurrent:" id="backupCurrent:"/><div class="member detail outer"><h3 class="member detail name">backupCurrent</h3><pre class="member detail synopsis">public boolean backupCurrent()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> NOT IMPLEMENTED YET. This will overwrite the old backup file (if it exists)
 with the current file. It leaves the current file as it is.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getBackupFile:" id="getBackupFile:"/><div class="member detail outer"><h3 class="member detail name">getBackupFile</h3><pre class="member detail synopsis">protected <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> getBackupFile()</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getBackupFileName:" id="getBackupFileName:"/><div class="member detail outer"><h3 class="member detail name">getBackupFileName</h3><pre class="member detail synopsis">protected <a href="../../java/lang/String.html" title="Class in java.lang">String</a> getBackupFileName()</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getFile:" id="getFile:"/><div class="member detail outer"><h3 class="member detail name">getFile</h3><pre class="member detail synopsis">public <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> getFile()</pre><blockquote class="member detail name"><div class="member detail description"> Get the actual file.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">The actual file.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getFullPath:" id="getFullPath:"/><div class="member detail outer"><h3 class="member detail name">getFullPath</h3><pre class="member detail synopsis">protected <a href="../../java/lang/String.html" title="Class in java.lang">String</a> getFullPath()</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getNewFile:" id="getNewFile:"/><div class="member detail outer"><h3 class="member detail name">getNewFile</h3><pre class="member detail synopsis">protected <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> getNewFile()</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getNewFileName:" id="getNewFileName:"/><div class="member detail outer"><h3 class="member detail name">getNewFileName</h3><pre class="member detail synopsis">protected <a href="../../java/lang/String.html" title="Class in java.lang">String</a> getNewFileName()</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getTempFile:" id="getTempFile:"/><div class="member detail outer"><h3 class="member detail name">getTempFile</h3><pre class="member detail synopsis">public <a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> getTempFile()</pre><blockquote class="member detail name"><div class="member detail description"> Get a temporary file that will eventually be used to replace the actual file. This
file is always the same name as the actual file with a ".tmp" added to it.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">A new ".tmp" file.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setNewFile:File" id="setNewFile:File"/><div class="member detail outer"><h3 class="member detail name">setNewFile</h3><pre class="member detail synopsis">public boolean setNewFile(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> f)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Safely rename the file so that it becomes the orignal file.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">f</code><span class="separator"> - </span><span class="description">The new file to be renamed.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true if successful.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description"></span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setNewFile:File:boolean" id="setNewFile:File:boolean"/><div class="member detail outer"><h3 class="member detail name">setNewFile</h3><pre class="member detail synopsis">public boolean setNewFile(<a href="../../ewe/io/File.html" title="Class in ewe.io">File</a> f,
                          boolean updateTime)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Safely rename the file so that it becomes the orignal file.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">f</code><span class="separator"> - </span><span class="description">The new file to be renamed.</span></dd><dd class="item"><code class="name">updateTime</code><span class="separator"> - </span><span class="description">true if the new file should have its time updated to the current time.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true if successful.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description"></span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="swapToNew:" id="swapToNew:"/><div class="member detail outer"><h3 class="member detail name">swapToNew</h3><pre class="member detail synopsis">protected boolean swapToNew()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> This will do the following:
 <nl>
 <li> Remove the old backup file (if it exists).
 </li><li> Rename the current file to be the backup (".bak") file.
 </li><li> Rename the new (".new") file to be the current file.
 </li><li> If keepBackup is false, the backup will be deleted.
 </li></nl>
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><p class="navbar bottom spacer"> </p><table class="navbar div bottom"><tr><td><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td></tr></table><hr/>Copyright &copy; 2008 <a href="mailto:miros-discuss@mirbsd.de">The MirOS Project</a> and its contributors.</body></html>