<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//gnu.org///DTD XHTML 1.1 plus Target 1.0//EN" "../../resources/xhtml11-target10.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>SecureDocument</title><script src="../../resources/gjdoc.js" type="text/javascript"><!-- this comment required for konqueror 3.2.2 --></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="generator" content="GNU Gjdoc Standard Doclet"/><meta name="keywords" content="ewe.security.SecureDocument class"/><meta name="keywords" content="dontUseCompression"/><meta name="keywords" content="dontTimestampSignature"/><meta name="keywords" content="signature"/><meta name="keywords" content="encryptedKey"/><meta name="keywords" content="changeFrequency"/><meta name="keywords" content="STATUS_HAS_ENCRYPTION_KEY"/><meta name="keywords" content="STATUS_DATA_IS_ENCRYPTED"/><meta name="keywords" content="STATUS_HAS_SIGNATURE"/><meta name="keywords" content="setData()"/><meta name="keywords" content="getEncryptor()"/><meta name="keywords" content="getDecryptor()"/><meta name="keywords" content="stringToKey()"/><meta name="keywords" content="setPassword()"/><meta name="keywords" content="setEncryptor()"/><meta name="keywords" content="setDecryptor()"/><meta name="keywords" content="setKeys()"/><meta name="keywords" content="clearEncryption()"/><meta name="keywords" content="changeEncryption()"/><meta name="keywords" content="hasEncryptionParameters()"/><meta name="keywords" content="encode()"/><meta name="keywords" content="getStatus()"/><meta name="keywords" content="decode()"/><meta name="keywords" content="makeAuthenticator()"/><meta name="keywords" content="authenticate()"/><meta name="keywords" content="validateAuthenticator()"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-layout.css" title="GNU Clean"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-color1.css" title="GNU Clean"/></head><body class="content class" onload="if(parent.contentPageLoaded)parent.contentPageLoaded(document.title)"><table class="navbar div top"><tr><td class="navbar div top"><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td><td class="header" rowspan="2">MirEwe 1.49mb4 API</td></tr><tr><td class="navi"><a href="../../ewe/security/RSAKey.html">Prev Class</a> | <a href="../../ewe/security/SecureRandom.html">Next Class</a></td><td class="navi"><a href="../../index.html" title="Show in a frameset" target="_top">Frames</a> | <a href="SecureDocument.html" title="Show without frames" target="_top">No Frames</a> </td></tr><tr><td class="navi">Summary: Nested | <a href="#summary-fields">Field</a> | <a href="#summary-methods">Method</a> | <a href="#summary-constructors">Constr</a></td><td class="navi">Detail: Nested | <a href="#detail-fields">Field</a> | <a href="#detail-methods">Method</a> | <a href="#detail-constructors">Constr</a></td></tr></table><div class="class title outer"><h3 class="class title-package">ewe.security</h3><h1 class="class title-class">Class SecureDocument</h1></div><div class="class inheritance-tree"><ul class="inheritance 0"><li class="inheritance 0"><code><a href="../../java/lang/Object.html">java.lang.Object</a></code></li><li><ul class="inheritance 1"><li class="inheritance 1"><code>ewe.security.SecureDocument</code></li><li></li></ul></li></ul></div><hr/><div class="class synopsis outer"><div class="class synopsis declaration"><code>public class <b class="class synopsis name">SecureDocument</b></code></div><div class="class synopsis superclass"><code>extends <a href="../../java/lang/Object.html" title="Class in java.lang">Object</a></code></div></div><hr/><div class="class description"> A SecureDocument is a document that has been made secure by any one or more of a number
 of ways. These include:<p/>
 <nl>
 <li>
 The document has been encrypted - and optionally compressed
 by deflation before encryption. The data is usually salted before encryption.
 </li><li>
 The key for the document encryption (if any) may be included, itself being encrypted using
 the receivers public key.
 </li><li>
 The document may be digitally signed by the sender using the sender's private key. This signature
 will contain the SHA1 digest of the message (or salted message if it is encrypted), the length
 of the message (or salted message) and a signature timestamp (which may be zeroed).
 </li></nl>
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><a name="summary-fields" id="summary-fields"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Field Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis">static int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#STATUS_DATA_IS_ENCRYPTED">STATUS_DATA_IS_ENCRYPTED</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">static int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#STATUS_HAS_ENCRYPTION_KEY">STATUS_HAS_ENCRYPTION_KEY</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">static int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#STATUS_HAS_SIGNATURE">STATUS_HAS_SIGNATURE</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#changeFrequency">changeFrequency</a></code></dt><dd class="description"> This is only used if there is a remote Public Key available, since this indicates
 that an encryption password could be created at random for each message, and then
 encrypted in the receivers public key.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#dontTimestampSignature">dontTimestampSignature</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#dontUseCompression">dontUseCompression</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> byte[]</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#encryptedKey">encryptedKey</a></code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/Signature.html" title="Class in ewe.security">Signature</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#signature">signature</a></code></dt></dl></td></tr></table></dd></dl><a name="summary-constructors" id="summary-constructors"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Constructor Summary</h2></td></tr><tr><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#SecureDocument:">SecureDocument</a>()</code></dt><dd class="description"> Create a new SecureDocument.</dd></dl></td></tr></table></dd></dl><a name="summary-methods" id="summary-methods"/><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table header"><td colspan="2"><h2 class="table header">Method Summary</h2></td></tr><tr><td class="left" valign="top"><code class="synopsis"> byte[]</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#authenticate:byte-:EncryptionKey">authenticate</a>(byte[]&nbsp;authenticator, <a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a>&nbsp;myPrivateKey)</code></dt><dd class="description"> This is called by a server when it has received a sequence of bytes as created by
 makeServerAuthenticator().</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#changeEncryption:">changeEncryption</a>()</code></dt><dd class="description"> This forces the SecureDocument to change its encryption for encoding by choosing a new random key.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#clearEncryption:">clearEncryption</a>()</code></dt><dd class="description"> This removes all encryption parameters, leaving it in a state unable to encrypt
 or decrypt any data.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#decode:ByteArray">decode</a>(<a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a>&nbsp;dest)</code></dt><dd class="description"> Decode the encrypted text as set by setData() into the plain text of the original document.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#encode:ByteArray">encode</a>(<a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a>&nbsp;destination)</code></dt><dd class="description"> Encode the plain text as set by setData() into a secure document sequence of bytes.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getDecryptor:byte-">getDecryptor</a>(byte[]&nbsp;key)</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  <a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getEncryptor:byte-">getEncryptor</a>(byte[]&nbsp;key)</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> int</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#getStatus:">getStatus</a>()</code></dt><dd class="description"> Get the encryption status of the encoded document.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#hasEncryptionParameters:">hasEncryptionParameters</a>()</code></dt><dd class="description"> Return whether or not this SecureDocument can encode() any data with any kind of
 security.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> byte[]</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#makeAuthenticator:EncryptionKey">makeAuthenticator</a>(<a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a>&nbsp;serverPublicKey)</code></dt><dd class="description"> Call this on a new SecureDocument to create a byte sequence to be sent
 to the server who you believe is holding the private key of the supplied
 public key.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setData:byte-">setData</a>(byte[]&nbsp;source)</code></dt><dd class="description"> Set the source data.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setData:byte-:int:int">setData</a>(byte[]&nbsp;source, int&nbsp;offset, int&nbsp;length)</code></dt><dd class="description"> Set the source data.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setDecryptor:DataProcessor">setDecryptor</a>(<a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a>&nbsp;decryptor)</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setEncryptor:DataProcessor">setEncryptor</a>(<a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a>&nbsp;encryptor)</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setKeys:EncryptionKey:EncryptionKey">setKeys</a>(<a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a>&nbsp;receiverKey, <a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a>&nbsp;creatorKey)</code></dt><dd class="description"> Set the private/public keys.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setPassword:byte-">setPassword</a>(byte[]&nbsp;key)</code></dt><dd class="description"> You can call this before encoding to explicitly set the key used for the symmetric encryption.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a></code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#setPassword:String">setPassword</a>(<a href="../../java/lang/String.html" title="Class in java.lang">String</a>&nbsp;password)</code></dt><dd class="description"> You can call this before encoding to explicitly set the key used for the symmetric encryption.</dd></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis">protected  byte[]</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#stringToKey:String">stringToKey</a>(<a href="../../java/lang/String.html" title="Class in java.lang">String</a>&nbsp;password)</code></dt></dl></td></tr><tr><td class="left" valign="top"><code class="synopsis"> boolean</code></td><td class="right"><dl class="list"><dt class="synopsis"><code><a href="#validateAuthenticator:byte-">validateAuthenticator</a>(byte[]&nbsp;reply)</code></dt><dd class="description"> Validate the reply from the server as created by authenticate().</dd></dl></td></tr></table></dd></dl><dl class="table container"><dd><table class="class summary" border="1" width="100%"><tr class="table sub header"><td colspan="2"><h3 class="table sub header">Methods inherited from class java.lang.<a href="../../java/lang/Object.html" title="Class in java.lang">Object</a></h3></td></tr><tr><td class="inherited"><a href="../../java/lang/Object.html#clone:" title="clone()"><code class="member">clone</code></a>, <a href="../../java/lang/Object.html#equals:Object" title="equals(Object)"><code class="member">equals</code></a>, <a href="../../java/lang/Object.html#finalize:" title="finalize()"><code class="member">finalize</code></a>, <a href="../../java/lang/Object.html#getClass:" title="getClass()"><code class="member">getClass</code></a>, <a href="../../java/lang/Object.html#hashCode:" title="hashCode()"><code class="member">hashCode</code></a>, <a href="../../java/lang/Object.html#toString:" title="toString()"><code class="member">toString</code></a></td></tr></table></dd></dl><a name="detail-fields" id="detail-fields"/><h2 class="section header">Field Details</h2><div class="section"><a name="STATUS_DATA_IS_ENCRYPTED" id="STATUS_DATA_IS_ENCRYPTED"/><div class="member detail outer"><h3 class="member detail name">STATUS_DATA_IS_ENCRYPTED</h3><pre class="member detail synopsis">public static final int STATUS_DATA_IS_ENCRYPTED</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Field Value:</b></dt><dd class="member detail thrown item">2</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="STATUS_HAS_ENCRYPTION_KEY" id="STATUS_HAS_ENCRYPTION_KEY"/><div class="member detail outer"><h3 class="member detail name">STATUS_HAS_ENCRYPTION_KEY</h3><pre class="member detail synopsis">public static final int STATUS_HAS_ENCRYPTION_KEY</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Field Value:</b></dt><dd class="member detail thrown item">1</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="STATUS_HAS_SIGNATURE" id="STATUS_HAS_SIGNATURE"/><div class="member detail outer"><h3 class="member detail name">STATUS_HAS_SIGNATURE</h3><pre class="member detail synopsis">public static final int STATUS_HAS_SIGNATURE</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Field Value:</b></dt><dd class="member detail thrown item">4</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="changeFrequency" id="changeFrequency"/><div class="member detail outer"><h3 class="member detail name">changeFrequency</h3><pre class="member detail synopsis">public int changeFrequency</pre><blockquote class="member detail name"><div class="member detail description"> This is only used if there is a remote Public Key available, since this indicates
 that an encryption password could be created at random for each message, and then
 encrypted in the receivers public key.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="dontTimestampSignature" id="dontTimestampSignature"/><div class="member detail outer"><h3 class="member detail name">dontTimestampSignature</h3><pre class="member detail synopsis">public boolean dontTimestampSignature</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="dontUseCompression" id="dontUseCompression"/><div class="member detail outer"><h3 class="member detail name">dontUseCompression</h3><pre class="member detail synopsis">public boolean dontUseCompression</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="encryptedKey" id="encryptedKey"/><div class="member detail outer"><h3 class="member detail name">encryptedKey</h3><pre class="member detail synopsis">public byte[] encryptedKey</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="signature" id="signature"/><div class="member detail outer"><h3 class="member detail name">signature</h3><pre class="member detail synopsis">public <a href="../../ewe/security/Signature.html" title="Class in ewe.security">Signature</a> signature</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-constructors" id="detail-constructors"/><h2 class="section header">Constructor Details</h2><div class="section"><a name="SecureDocument:" id="SecureDocument:"/><div class="member detail outer"><h3 class="member detail name">SecureDocument</h3><pre class="member detail synopsis">public SecureDocument()</pre><blockquote class="member detail name"><div class="member detail description"> Create a new SecureDocument. After calling this you would call the set() methods
 to set the security parameters, and then call either encode() to generate the
 document or decode() to decode the document.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><a name="detail-methods" id="detail-methods"/><h2 class="section header">Method Details</h2><div class="section"><a name="authenticate:byte-:EncryptionKey" id="authenticate:byte-:EncryptionKey"/><div class="member detail outer"><h3 class="member detail name">authenticate</h3><pre class="member detail synopsis">public byte[] authenticate(byte[] authenticator,
                           <a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a> myPrivateKey)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> This is called by a server when it has received a sequence of bytes as created by
 makeServerAuthenticator(). It will attempt to authenticate that it holds the private
 key of the public key that the requestor believes belongs to this server. It produces
 a sequence of bytes to send back to the requestor for validation using validateAuthenticator().
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">authenticator</code><span class="separator"> - </span><span class="description">the byte sequence as created by makeServerAuthenticator() on the client.</span></dd><dd class="item"><code class="name">myPrivateKey</code><span class="separator"> - </span><span class="description">my private key.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">a byte sequence to be sent back to the client to prove that this server does have
the private key.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if an error occurs decrypting or encrypting the data - which usually
indicates that the keys do not match.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="changeEncryption:" id="changeEncryption:"/><div class="member detail outer"><h3 class="member detail name">changeEncryption</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> changeEncryption()
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> This forces the SecureDocument to change its encryption for encoding by choosing a new random key.
 This is only
 used when a remote Public Key is available. The new encryption key is
 encrypted using the receiver's Public Key and then saved along with the data
 encrypted using that new key.
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="clearEncryption:" id="clearEncryption:"/><div class="member detail outer"><h3 class="member detail name">clearEncryption</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> clearEncryption()</pre><blockquote class="member detail name"><div class="member detail description"> This removes all encryption parameters, leaving it in a state unable to encrypt
 or decrypt any data.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">This SecureDocument.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="decode:ByteArray" id="decode:ByteArray"/><div class="member detail outer"><h3 class="member detail name">decode</h3><pre class="member detail synopsis">public <a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a> decode(<a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a> dest)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Decode the encrypted text as set by setData() into the plain text of the original document.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">dest</code><span class="separator"> - </span><span class="description">an optional destination ByteArray.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the destination or a new ByteArray if dest is null.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">on a decryption error.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="encode:ByteArray" id="encode:ByteArray"/><div class="member detail outer"><h3 class="member detail name">encode</h3><pre class="member detail synopsis">public <a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a> encode(<a href="../../ewe/util/ByteArray.html" title="Class in ewe.util">ByteArray</a> destination)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a>,
                   <a href="../../java/lang/IllegalStateException.html" title="Class in java.lang">IllegalStateException</a></pre><blockquote class="member detail name"><div class="member detail description"> Encode the plain text as set by setData() into a secure document sequence of bytes. This
 byte sequence can be stored or transmitted and then another SecureDocument object can be
 used to decode the data - once it has been set up with the correct decryption parameters.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">destination</code><span class="separator"> - </span><span class="description">an optional destination ByteArray.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">the destination or a new ByteArray if destination is null.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">on an encryption error.</span></dd><dd class="member detail thrown item"><code class="name"><a href="../../java/lang/IllegalStateException.html" title="Class in java.lang">IllegalStateException</a></code><span class="separator"> - </span><span class="description">if no security options have been setup.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getDecryptor:byte-" id="getDecryptor:byte-"/><div class="member detail outer"><h3 class="member detail name">getDecryptor</h3><pre class="member detail synopsis">protected <a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a> getDecryptor(byte[] key)</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getEncryptor:byte-" id="getEncryptor:byte-"/><div class="member detail outer"><h3 class="member detail name">getEncryptor</h3><pre class="member detail synopsis">protected <a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a> getEncryptor(byte[] key)</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="getStatus:" id="getStatus:"/><div class="member detail outer"><h3 class="member detail name">getStatus</h3><pre class="member detail synopsis">public int getStatus()
            throws <a href="../../ewe/io/StreamCorruptedException.html" title="Class in ewe.io">StreamCorruptedException</a></pre><blockquote class="member detail name"><div class="member detail description"> Get the encryption status of the encoded document.
</div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">a value that has one or more of the flags set: STATUS_HAS_ENCRYPTION_KEY,
STATUS_DATA_IS_ENCRYPTED, STATUS_HAS_SIGNATURE</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/StreamCorruptedException.html" title="Class in ewe.io">StreamCorruptedException</a></code><span class="separator"> - </span><span class="description">if the data is corrupted.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="hasEncryptionParameters:" id="hasEncryptionParameters:"/><div class="member detail outer"><h3 class="member detail name">hasEncryptionParameters</h3><pre class="member detail synopsis">public boolean hasEncryptionParameters()</pre><blockquote class="member detail name"><div class="member detail description"> Return whether or not this SecureDocument can encode() any data with any kind of
 security. This will return true if:<br/>
<ul><li>creatorKey != null - in which case a signature can be generated for the data and saved
with the document.
</li><li>receiverKey != null - in which case a random symmetric key can be chosen and used
to encrypt the data. The symmetric key will be encrypted using the receiver's public key
and stored along with the encrypted data.
</li><li>encryptor != null - in which case the encryptor will be used to encrypt the data to
be stored, and it is assumed that the receiver will have the matching decryptor to decrypt
the data.
</li></ul>
</div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="makeAuthenticator:EncryptionKey" id="makeAuthenticator:EncryptionKey"/><div class="member detail outer"><h3 class="member detail name">makeAuthenticator</h3><pre class="member detail synopsis">public byte[] makeAuthenticator(<a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a> serverPublicKey)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> Call this on a new SecureDocument to create a byte sequence to be sent
 to the server who you believe is holding the private key of the supplied
 public key. The server should call authenticate() on the received data
 and then send back the authenticated bytes. The sender should then call validateAuthenticator() on
 this same SecureDocument providing the received authenticated bytes. If it returns true
 this proves that the receiver is in possession of the private key.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">serverPublicKey</code><span class="separator"> - </span><span class="description">the public key of ther server.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">a byte sequence to be sent to the server for authentication.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description">if this authentication cannot be carried out using the server's public key.</span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setData:byte-" id="setData:byte-"/><div class="member detail outer"><h3 class="member detail name">setData</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> setData(byte[] source)</pre><blockquote class="member detail name"><div class="member detail description"> Set the source data. This is either the document in its secure form (in which case you
 later wish to decode it using decode()) or the document in its plaintext form (in which
 case you wish later to call encode() on it to encode it).
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">source</code><span class="separator"> - </span><span class="description">The source bytes.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">this SecureDocument</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setData:byte-:int:int" id="setData:byte-:int:int"/><div class="member detail outer"><h3 class="member detail name">setData</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> setData(byte[] source,
                              int offset,
                              int length)</pre><blockquote class="member detail name"><div class="member detail description"> Set the source data. This is either the document in its secure form (in which case you
 later wish to decode it using decode()) or the document in its plaintext form (in which
 case you wish later to call encode() on it to encode it).
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">source</code><span class="separator"> - </span><span class="description">The source bytes.</span></dd><dd class="item"><code class="name">offset</code><span class="separator"> - </span><span class="description">The offset.</span></dd><dd class="item"><code class="name">length</code><span class="separator"> - </span><span class="description">The length.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">this SecureDocument</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setDecryptor:DataProcessor" id="setDecryptor:DataProcessor"/><div class="member detail outer"><h3 class="member detail name">setDecryptor</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> setDecryptor(<a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a> decryptor)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setEncryptor:DataProcessor" id="setEncryptor:DataProcessor"/><div class="member detail outer"><h3 class="member detail name">setEncryptor</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> setEncryptor(<a href="../../ewe/io/DataProcessor.html" title="Interface in ewe.io">DataProcessor</a> encryptor)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setKeys:EncryptionKey:EncryptionKey" id="setKeys:EncryptionKey:EncryptionKey"/><div class="member detail outer"><h3 class="member detail name">setKeys</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> setKeys(<a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a> receiverKey,
                              <a href="../../ewe/security/EncryptionKey.html" title="Interface in ewe.security">EncryptionKey</a> creatorKey)</pre><blockquote class="member detail name"><div class="member detail description"> Set the private/public keys. If you are going to be creating (encoding) the document
 then you should set creatorKey to be your private key and receiverKey to be the receiver's
 key. If you do not set the creatorKey then the document will not be digitaly signed. If
 you do not set the receiverKey then the document will not be encrypted unless you explicitly
 set the encryption key using setEncryptor(byte[] key).
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">receiverKey</code><span class="separator"> - </span><span class="description">The key of the receiver of the document - if this is not null, then random
symmetric keys will be used to encode the data and the key will be encrypted using the receiver's
public key.</span></dd><dd class="item"><code class="name">creatorKey</code><span class="separator"> - </span><span class="description">The key of the creator of the document - this is used for signing the document.
If it is null, the document will not be signed.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">This SecureDocument</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setPassword:byte-" id="setPassword:byte-"/><div class="member detail outer"><h3 class="member detail name">setPassword</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> setPassword(byte[] key)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> You can call this before encoding to explicitly set the key used for the symmetric encryption.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">key</code><span class="separator"> - </span><span class="description">the key for the encryption.</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">This SecureDocument.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description"></span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="setPassword:String" id="setPassword:String"/><div class="member detail outer"><h3 class="member detail name">setPassword</h3><pre class="member detail synopsis">public <a href="../../ewe/security/SecureDocument.html" title="Class in ewe.security">SecureDocument</a> setPassword(<a href="../../java/lang/String.html" title="Class in java.lang">String</a> password)
            throws <a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></pre><blockquote class="member detail name"><div class="member detail description"> You can call this before encoding to explicitly set the key used for the symmetric encryption.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">This SecureDocument.</dd></dl></div><div class="member detail thrown list"><dl><dt class="member detail thrown header"><b>Throws:</b></dt><dd class="member detail thrown item"><code class="name"><a href="../../ewe/io/IOException.html" title="Class in ewe.io">IOException</a></code><span class="separator"> - </span><span class="description"></span></dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="stringToKey:String" id="stringToKey:String"/><div class="member detail outer"><h3 class="member detail name">stringToKey</h3><pre class="member detail synopsis">protected byte[] stringToKey(<a href="../../java/lang/String.html" title="Class in java.lang">String</a> password)</pre><blockquote class="member detail name"><div class="member detail description"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div><hr/><a name="validateAuthenticator:byte-" id="validateAuthenticator:byte-"/><div class="member detail outer"><h3 class="member detail name">validateAuthenticator</h3><pre class="member detail synopsis">public boolean validateAuthenticator(byte[] reply)</pre><blockquote class="member detail name"><div class="member detail description"> Validate the reply from the server as created by authenticate(). This can only be
 called on the same SecureDocument that makeServerAuthenticator() was called on.
</div><div class="parameter"><dl><dt class="header"><b>Parameters:</b></dt><dd class="item"><code class="name">reply</code><span class="separator"> - </span><span class="description">the reply from the server as generated by authenticate().</span></dd></dl></div><div class="member detail return list"><dl><dt class="member detail return header"><b>Returns:</b></dt><dd class="member detail return item">true if it passed the test, false if not.</dd></dl></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div><div class="taglet"></div></blockquote></div></div><p class="navbar bottom spacer"> </p><table class="navbar div bottom"><tr><td><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td></tr></table><hr/>Copyright &copy; 2008 <a href="mailto:miros-discuss@mirbsd.de">The MirOS Project</a> and its contributors.</body></html>